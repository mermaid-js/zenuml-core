<!DOCTYPE html>
<html lang="en" style="height: 100%; width: 100%">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>ZenUML Web Renderer</title>
    <meta name="description" content="ZenUML Web Renderer - Render sequence diagrams from URL parameters" />
    <meta name="keywords" content="zenuml, sequence diagram, uml, renderer, web" />
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      rel="preload stylesheet"
      as="style"
      href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@300;400;500;700&display=swap"
    />
    
    <!-- Basic styles for the renderer -->
    <style>
      * {
        box-sizing: border-box;
      }
      
      body {
        margin: 0;
        padding: 0;
        font-family: 'Roboto Slab', serif, system-ui, -apple-system, sans-serif;
        background-color: white;
        height: 100vh;
        width: 100vw;
        overflow: auto;
      }
      
      .zenuml {
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
        overflow: auto;
        text-align: center;
      }
    </style>
  </head>
  <body>
    <!-- ZenUML diagram container -->
    <pre class="zenuml" id="zenuml-diagram"></pre>

    <!-- Initialize the renderer -->
    <script type="module">
      // Basic renderer initialization
      console.log('ZenUML Web Renderer initializing...');
      
      // Initialize the renderer
      async function initRenderer() {
        try {
          // Check if ZenUML is available
          if (typeof window.zenUml === 'undefined') {
            console.log('Waiting for ZenUML to load...');
            // Wait for ZenUML to be available
            await new Promise((resolve) => {
              const checkZenUml = () => {
                if (typeof window.zenUml !== 'undefined') {
                  resolve();
                } else {
                  setTimeout(checkZenUml, 100);
                }
              };
              checkZenUml();
            });
          }
          
          // For now, just render empty diagram since we haven't implemented URL parsing yet
          console.log('ZenUML Web Renderer initialized successfully');
          
        } catch (error) {
          console.error('Failed to initialize renderer:', error);
        }
      }
      
      // Start initialization when DOM is ready
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initRenderer);
      } else {
        initRenderer();
      }
    </script>
    
    <!-- Load ZenUML core -->
    <script type="module" src="/src/main.ts"></script>
  </body>
</html>